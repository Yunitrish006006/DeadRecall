# 🎯 當前問題總結與解決方案

## ❌ 當前問題

構建失敗，錯誤訊息：
```
ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
```

**原因**：命令列環境找不到 Java（雖然 IntelliJ IDEA 中可以用）

---

## ✅ 一鍵解決方案

在 PowerShell 中執行：
```powershell
.\setup-java.ps1
```

這個腳本會：
1. 🔍 自動搜尋所有 Java 安裝（JDK 8, 11, 17, 21 等）
2. 📋 顯示找到的 Java 版本讓你選擇
3. ✅ 推薦使用 Java 21（如果有的話）
4. ⚙️ 自動設定 JAVA_HOME 和 PATH
5. 🧪 驗證 Java 是否可用
6. 💾 詢問是否永久保存設定
7. 🚀 詢問是否立即構建模組

**全自動，無需手動操作！**

---

## 📋 完整流程

### 步驟 1: 設定 Java 環境
```powershell
.\setup-java.ps1
```

### 步驟 2: 構建模組（如果腳本沒有自動構建）
```powershell
.\rebuild.ps1
```

### 步驟 3: 驗證 JAR
```powershell
.\verify-jar.ps1
```

### 步驟 4: 部署測試
```powershell
Copy-Item "build\libs\deadrecall-1.1.0.jar" -Destination "$env:APPDATA\.minecraft\mods\" -Force
```

---

## 🎯 預期結果

### 設定 Java 後
```
✅ Java 已設定
openjdk version "21.0.x" ...
```

### 構建成功後
```
✅ 構建成功
JAR 文件已生成
大小: ~300-350 KB
```

### 驗證通過後
```
✅ 所有檢查通過！
  ✅ Gson 已打包
  ✅ 所有類文件存在
你的模組已正確打包，可以在生產環境使用！
```

---

## 📁 我創建的工具腳本

| 腳本 | 用途 |
|------|------|
| `setup-java.ps1` | ⭐ 自動設定 Java 環境 |
| `rebuild.ps1` | 重新構建模組 |
| `verify-jar.ps1` | 驗證 JAR 是否正確打包 |
| `test-webhook.ps1` | 測試 Discord Webhook |
| `test-discord-api.ps1` | 測試 Worker API |

---

## 🤔 常見問題

### Q: 為什麼 IntelliJ IDEA 能構建但命令列不行？
**A**: IDE 使用內建的 JDK，命令列需要手動設定 JAVA_HOME。

### Q: 我需要什麼版本的 Java？
**A**: Minecraft 1.21.1 需要 **Java 21**（LTS 版本）。

### Q: 設定是否會影響其他專案？
**A**: 腳本會詢問是否永久設定。如果選 N，只在當前 PowerShell 有效。

### Q: 如果沒有安裝 Java 怎麼辦？
**A**: 從 https://adoptium.net/ 下載 Java 21，安裝後執行 `setup-java.ps1`。

---

## 🎬 現在執行

**一鍵解決所有問題**：
```powershell
.\setup-java.ps1
```

腳本會自動：
- ✅ 找到並設定 Java
- ✅ 詢問是否構建模組
- ✅ 如果選擇構建，會自動執行 rebuild.ps1

**全自動化流程，坐等完成即可！** 🎉

---

## 📊 時間估計

- 設定 Java：30 秒 - 1 分鐘
- 構建模組：1-3 分鐘
- 驗證 JAR：5 秒
- **總計：約 2-5 分鐘**

---

## ✅ 成功標誌

完成後你會看到：
```
✅ Java 環境設定完成！
✅ 構建成功
✅ 所有檢查通過！
你的模組已正確打包，可以在生產環境使用！
```

然後就可以複製 JAR 到 Minecraft 測試了！

---

**現在執行：`.\setup-java.ps1` 開始吧！** 🚀
