# âœ… èƒŒåŒ…å­˜å‚¨é—®é¢˜å·²ä¿®å¤

## ğŸ¯ é—®é¢˜æ€»ç»“
**åŸå§‹é—®é¢˜**: èƒŒåŒ…é‡Œé¢æ²¡å­˜åˆ°ä¸œè¥¿

**å…·ä½“è¡¨ç°**:
- æ‰“å¼€èƒŒåŒ…ï¼Œæ”¾å…¥ç‰©å“
- å…³é—­èƒŒåŒ…
- å†æ¬¡æ‰“å¼€æ—¶ï¼Œç‰©å“æ¶ˆå¤±äº†

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### æ ¹æœ¬åŸå› 
ä¹‹å‰çš„ä»£ç ä¼ é€’ `ItemStack` å‰¯æœ¬ç»™ `BackpackInventory`ï¼Œä¿®æ”¹å‰¯æœ¬ä¸ä¼šå½±å“ç©å®¶æ‰‹ä¸­çš„çœŸå®ç‰©å“ã€‚

### è§£å†³æ–¹æ³•
**æ”¹ä¸ºä¼ é€’ `PlayerEntity` å’Œ `Hand` å¼•ç”¨**ï¼Œæ¯æ¬¡éœ€è¦æ—¶åŠ¨æ€è·å–ç©å®¶æ‰‹ä¸­çš„çœŸå® ItemStackã€‚

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. BackpackInventory.java
```java
// ä¹‹å‰: æ¥æ”¶ ItemStackï¼ˆå‰¯æœ¬ï¼‰
public BackpackInventory(ItemStack backpackStack) { ... }

// ç°åœ¨: æ¥æ”¶ Player å’Œ Handï¼ˆå¼•ç”¨ï¼‰
public BackpackInventory(PlayerEntity player, Hand hand) {
    this.player = player;
    this.hand = hand;
    // ...
}

// æ·»åŠ åŠ¨æ€è·å–æ–¹æ³•
private ItemStack getBackpackStack() {
    return player.getStackInHand(hand);  // æ€»æ˜¯è·å–çœŸå®å¼•ç”¨
}
```

### 2. BackpackItem.java
```java
// ä¼ é€’ hand å‚æ•°
user.openHandledScreen(new SimpleNamedScreenHandlerFactory(
    (syncId, playerInventory, player) -> 
        new BackpackScreenHandler(syncId, playerInventory, player, hand),
    // ...
));
```

### 3. BackpackScreenHandler.java
```java
// æ›´æ–°æ„é€ å‡½æ•°
public BackpackScreenHandler(int syncId, PlayerInventory playerInventory, 
                             PlayerEntity player, Hand hand) {
    this(syncId, playerInventory, new BackpackInventory(player, hand));
}
```

---

## âœ… ä¿®å¤æ•ˆæœ

| åŠŸèƒ½ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| æ”¾å…¥ç‰©å“ | âœ… | âœ… |
| å…³é—­ä¿å­˜ | âŒ ç‰©å“æ¶ˆå¤± | âœ… æ­£ç¡®ä¿å­˜ |
| å†æ¬¡æ‰“å¼€ | âŒ èƒŒåŒ…ç©ºçš„ | âœ… ç‰©å“è¿˜åœ¨ |
| æ¸¸æˆé‡å¯ | âŒ ç‰©å“ä¸¢å¤± | âœ… æ•°æ®ä¿ç•™ |

---

## ğŸ® æµ‹è¯•æ–¹æ³•

### å¿«é€Ÿæµ‹è¯•
1. **æ„å»ºé¡¹ç›®**:
   ```powershell
   .\gradlew build
   ```

2. **å¯åŠ¨æ¸¸æˆ**:
   ```powershell
   .\gradlew runClient
   ```

3. **æ¸¸æˆå†…æµ‹è¯•**:
   - è·å–èƒŒåŒ…ï¼ˆåˆ›é€ æ¨¡å¼ â†’ å·¥å…·åˆ†ç±»ï¼‰
   - å³é”®æ‰“å¼€èƒŒåŒ…
   - æ”¾å…¥ä¸€äº›ç‰©å“
   - å…³é—­èƒŒåŒ…ï¼ˆæŒ‰ESCï¼‰
   - å†æ¬¡å³é”®æ‰“å¼€
   - âœ… **éªŒè¯ç‰©å“è¿˜åœ¨ï¼**

### è¯¦ç»†æµ‹è¯•åœºæ™¯
1. âœ… **åŸºç¡€æµ‹è¯•**: æ”¾å…¥ç‰©å“ â†’ å…³é—­ â†’ æ‰“å¼€ â†’ ç‰©å“è¿˜åœ¨
2. âœ… **å¤šæ¬¡æµ‹è¯•**: é‡å¤å¼€å…³å¤šæ¬¡ï¼Œç‰©å“æŒç»­ä¿å­˜
3. âœ… **é‡å¯æµ‹è¯•**: é€€å‡ºæ¸¸æˆ â†’ é‡æ–°è¿›å…¥ â†’ ç‰©å“ä¾ç„¶å­˜åœ¨
4. âœ… **å¤šèƒŒåŒ…æµ‹è¯•**: å¤šä¸ªèƒŒåŒ…å„è‡ªç‹¬ç«‹ä¿å­˜

---

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### Data Components API
ä½¿ç”¨ Minecraft 1.21.1 çš„æ–° API:
```java
// ä¿å­˜æ•°æ®
backpackStack.set(DataComponentTypes.CONTAINER, 
    ContainerComponent.fromStacks(items));

// åŠ è½½æ•°æ®
ContainerComponent container = backpackStack.getOrDefault(
    DataComponentTypes.CONTAINER, ContainerComponent.DEFAULT);
```

### å¼•ç”¨ç®¡ç†
```
ç©å®¶å³é”®èƒŒåŒ…
    â†“
ä¼ é€’ Player + Hand
    â†“
BackpackInventory åˆ›å»º
    â†“
æ¯æ¬¡ markDirty() æ—¶:
    â†“
getBackpackStack() è·å–çœŸå®å¼•ç”¨
    â†“
ä¿®æ”¹ Data Components
    â†“
âœ… æ•°æ®ä¿å­˜åˆ°ç©å®¶æ‰‹ä¸­çš„ç‰©å“
```

---

## ğŸ“¦ ç‰ˆæœ¬ä¿¡æ¯

- **ä¿®å¤ç‰ˆæœ¬**: v1.4.1
- **ä¿®å¤æ—¥æœŸ**: 2026å¹´2æœˆ15æ—¥
- **å½±å“æ–‡ä»¶**: 3ä¸ª Java ç±»
- **ç¼–è¯‘çŠ¶æ€**: âœ… æ— é”™è¯¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

è¯¦ç»†æŠ€æœ¯è¯´æ˜è¯·æŸ¥çœ‹:
- ğŸ“„ `èƒŒåŒ…å­˜å‚¨é—®é¢˜ä¿®å¤æŠ¥å‘Š.md` - å®Œæ•´æŠ€æœ¯åˆ†æ
- ğŸ“„ `èƒŒåŒ…å­˜å‚¨ä¿®å¤æµ‹è¯•æŒ‡å—.md` - æµ‹è¯•æ­¥éª¤æŒ‡å—
- ğŸ“„ `èƒŒåŒ…ç³»ç»Ÿå®ŒæˆæŠ¥å‘Š.md` - åŸå§‹åŠŸèƒ½æ–‡æ¡£

---

## ğŸ‰ ç»“è®º

**é—®é¢˜**: èƒŒåŒ…æ— æ³•ä¿å­˜ç‰©å“ âŒ  
**åŸå› **: ä½¿ç”¨äº† ItemStack å‰¯æœ¬  
**æ–¹æ¡ˆ**: æ”¹ç”¨ Player + Hand å¼•ç”¨  
**ç»“æœ**: ç‰©å“æ­£ç¡®ä¿å­˜ âœ…  

---

**ç°åœ¨èƒŒåŒ…ç³»ç»Ÿå®Œå…¨å¯ç”¨äº†ï¼èµ¶å¿«æµ‹è¯•å§ï¼** ğŸš€

---

*æœ€åæ›´æ–°: 2026å¹´2æœˆ15æ—¥*  
*çŠ¶æ€: âœ… å·²ä¿®å¤*  
*ç‰ˆæœ¬: DeadRecall v1.4.1*

